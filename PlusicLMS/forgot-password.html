<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password - PlasicLMS</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        brand: { 
                            50: '#f0fdf4', 
                            100: '#dcfce7', 
                            500: '#22c55e', 
                            600: '#16a34a', 
                            700: '#15803d',
                            800: '#166534'
                        }
                    }
                }
            }
        }
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #f8fafc; 
            overflow-x: hidden; 
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        ::-webkit-scrollbar-thumb {
            background: #22c55e;
            border-radius: 4px;
        }

        /* Form Input Focus */
        .form-input:focus {
            box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.1);
        }

        /* Background Animation */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .floating-element {
            animation: float 6s ease-in-out infinite;
        }

        @keyframes slide-up {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .slide-up {
            animation: slide-up 0.5s ease-out;
        }
    </style>
</head>
<body x-data="forgotPasswordApp()" x-init="init()">
    <!-- Background Elements -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none z-[-1]">
        <div class="absolute top-0 left-1/4 w-96 h-96 bg-brand-500 rounded-full blur-3xl opacity-5 floating-element"></div>
        <div class="absolute bottom-0 right-1/4 w-96 h-96 bg-emerald-500 rounded-full blur-3xl opacity-5 floating-element" style="animation-delay: 2s;"></div>
        <div class="absolute top-1/2 left-1/3 w-64 h-64 bg-blue-500 rounded-full blur-3xl opacity-5 floating-element" style="animation-delay: 4s;"></div>
    </div>

    <div class="min-h-screen flex items-center justify-center p-4">
        <div class="w-full max-w-lg">
            <!-- Back to Login -->
            <div class="mb-8">
                <a href="login.html" class="inline-flex items-center gap-2 text-slate-600 hover:text-brand-600 transition">
                    <i class="ph ph-arrow-left"></i>
                    <span>Back to Login</span>
                </a>
            </div>

            <!-- Main Card -->
            <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
                <!-- Header Section -->
                <div class="bg-gradient-to-r from-brand-600 to-emerald-500 p-8 text-white">
                    <div class="flex items-center gap-4 mb-6">
                        <div class="w-14 h-14 rounded-xl bg-white/20 backdrop-blur-sm flex items-center justify-center">
                            <i class="ph ph-lock-key text-2xl"></i>
                        </div>
                        <div>
                            <h1 class="text-3xl font-black">Reset Password</h1>
                            <p class="text-white/90">Regain access to your PlasicLMS account</p>
                        </div>
                    </div>
                </div>

                <!-- Step Indicator -->
                <div class="px-8 pt-8">
                    <div class="flex items-center justify-between mb-8">
                        <div class="flex items-center">
                            <div class="w-8 h-8 rounded-full flex items-center justify-center"
                                 :class="step === 1 ? 'bg-brand-600 text-white' : 'bg-slate-200 text-slate-500'">
                                1
                            </div>
                            <div class="ml-3 text-sm font-medium"
                                 :class="step === 1 ? 'text-slate-900' : 'text-slate-500'">
                                Enter Email
                            </div>
                        </div>
                        
                        <div class="flex-1 h-1 mx-4 bg-slate-200"></div>
                        
                        <div class="flex items-center">
                            <div class="w-8 h-8 rounded-full flex items-center justify-center"
                                 :class="step === 2 ? 'bg-brand-600 text-white' : 'bg-slate-200 text-slate-500'">
                                2
                            </div>
                            <div class="ml-3 text-sm"
                                 :class="step === 2 ? 'text-slate-900 font-medium' : 'text-slate-500'">
                                Verify Code
                            </div>
                        </div>
                        
                        <div class="flex-1 h-1 mx-4 bg-slate-200"></div>
                        
                        <div class="flex items-center">
                            <div class="w-8 h-8 rounded-full flex items-center justify-center"
                                 :class="step === 3 ? 'bg-brand-600 text-white' : 'bg-slate-200 text-slate-500'">
                                3
                            </div>
                            <div class="ml-3 text-sm"
                                 :class="step === 3 ? 'text-slate-900 font-medium' : 'text-slate-500'">
                                New Password
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 1: Enter Email -->
                <div x-show="step === 1" x-transition class="px-8 pb-8 slide-up">
                    <div class="text-center mb-8">
                        <div class="w-20 h-20 rounded-full bg-brand-100 flex items-center justify-center mx-auto mb-6">
                            <i class="ph ph-envelope text-3xl text-brand-600"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-slate-900 mb-3">Enter Your Email</h2>
                        <p class="text-slate-600">
                            We'll send a verification code to your email address to reset your password.
                        </p>
                    </div>

                    <form @submit.prevent="sendResetCode" class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">
                                Email Address *
                            </label>
                            <input type="email" 
                                   x-model="email"
                                   required
                                   class="w-full form-input px-4 py-3 bg-white border border-slate-200 rounded-lg focus:outline-none focus:border-brand-500 transition"
                                   placeholder="you@example.com"
                                   :disabled="loading">
                        </div>

                        <button type="submit"
                                :disabled="loading"
                                :class="loading ? 'opacity-70 cursor-not-allowed' : 'hover:shadow-lg'"
                                class="w-full bg-gradient-to-r from-brand-600 to-emerald-500 text-white font-bold py-4 rounded-lg transition-all duration-300">
                            <span x-show="!loading">Send Verification Code</span>
                            <span x-show="loading" class="flex items-center justify-center gap-2">
                                <i class="ph ph-circle-notch animate-spin"></i>
                                Sending Code...
                            </span>
                        </button>

                        <!-- Alternative Methods -->
                        <div class="pt-6 border-t border-slate-200">
                            <p class="text-sm text-slate-600 mb-4">Alternative recovery methods:</p>
                            <div class="grid grid-cols-2 gap-3">
                                <button type="button"
                                        @click="usePhoneRecovery"
                                        class="flex items-center justify-center gap-2 bg-white border border-slate-200 text-slate-700 font-medium py-3 rounded-lg hover:border-slate-300 hover:bg-slate-50 transition">
                                    <i class="ph ph-phone text-blue-500"></i>
                                    Use Phone
                                </button>
                                <button type="button"
                                        @click="useSecurityQuestions"
                                        class="flex items-center justify-center gap-2 bg-white border border-slate-200 text-slate-700 font-medium py-3 rounded-lg hover:border-slate-300 hover:bg-slate-50 transition">
                                    <i class="ph ph-question text-purple-500"></i>
                                    Security Questions
                                </button>
                            </div>
                        </div>
                    </form>
                </div>

                <!-- Step 2: Verify Code -->
                <div x-show="step === 2" x-transition class="px-8 pb-8 slide-up">
                    <div class="text-center mb-8">
                        <div class="w-20 h-20 rounded-full bg-blue-100 flex items-center justify-center mx-auto mb-6">
                            <i class="ph ph-shield-check text-3xl text-blue-600"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-slate-900 mb-3">Check Your Email</h2>
                        <p class="text-slate-600 mb-4">
                            We sent a 6-digit verification code to 
                            <span class="font-bold text-slate-900" x-text="email"></span>
                        </p>
                        <p class="text-sm text-slate-500">
                            Enter the code below. It expires in <span class="font-bold text-brand-600">10 minutes</span>.
                        </p>
                    </div>

                    <form @submit.prevent="verifyCode" class="space-y-6">
                        <!-- Code Input -->
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-4 text-center">
                                Enter 6-digit code
                            </label>
                            <div class="flex justify-center gap-3 mb-6">
                                <template x-for="(digit, index) in codeDigits" :key="index">
                                    <input type="text"
                                           x-model="codeDigits[index]"
                                           @input="handleCodeInput(index, $event)"
                                           @keydown.delete="handleCodeDelete(index, $event)"
                                           maxlength="1"
                                           class="w-14 h-14 text-center text-2xl font-bold form-input border-2 border-slate-200 rounded-lg focus:border-brand-500 focus:outline-none"
                                           :disabled="loading">
                                </template>
                            </div>
                        </div>

                        <!-- Timer -->
                        <div class="text-center">
                            <div class="inline-flex items-center gap-2 px-4 py-2 bg-slate-100 rounded-lg">
                                <i class="ph ph-clock text-slate-600"></i>
                                <span class="font-medium text-slate-900" x-text="timerFormatted"></span>
                                <span class="text-slate-600">remaining</span>
                            </div>
                        </div>

                        <!-- Resend Code -->
                        <div class="text-center">
                            <p class="text-slate-600 mb-2">Didn't receive the code?</p>
                            <button type="button"
                                    @click="resendCode"
                                    :disabled="resendCooldown > 0"
                                    class="text-brand-600 hover:text-brand-700 font-medium"
                                    x-text="resendCooldown > 0 ? `Resend in ${resendCooldown}s` : 'Resend Code'">
                            </button>
                        </div>

                        <!-- Action Buttons -->
                        <div class="space-y-4">
                            <button type="submit"
                                    :disabled="loading || !isCodeComplete"
                                    :class="(!isCodeComplete || loading) ? 'opacity-70 cursor-not-allowed' : 'hover:shadow-lg'"
                                    class="w-full bg-gradient-to-r from-brand-600 to-emerald-500 text-white font-bold py-4 rounded-lg transition-all duration-300">
                                <span x-show="!loading">Verify & Continue</span>
                                <span x-show="loading" class="flex items-center justify-center gap-2">
                                    <i class="ph ph-circle-notch animate-spin"></i>
                                    Verifying...
                                </span>
                            </button>

                            <button type="button"
                                    @click="step = 1"
                                    class="w-full bg-white border-2 border-slate-200 text-slate-700 font-bold py-3 rounded-lg hover:border-slate-300 transition">
                                Use Different Email
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Step 3: New Password -->
                <div x-show="step === 3" x-transition class="px-8 pb-8 slide-up">
                    <div class="text-center mb-8">
                        <div class="w-20 h-20 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-6">
                            <i class="ph ph-key text-3xl text-green-600"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-slate-900 mb-3">Create New Password</h2>
                        <p class="text-slate-600">
                            Create a strong, new password for your PlasicLMS account.
                        </p>
                    </div>

                    <form @submit.prevent="resetPassword" class="space-y-6">
                        <!-- New Password -->
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">
                                New Password *
                            </label>
                            <div class="relative">
                                <input :type="showNewPassword ? 'text' : 'password'" 
                                       x-model="newPassword"
                                       required
                                       @input="checkPasswordStrength"
                                       class="w-full form-input px-4 py-3 bg-white border border-slate-200 rounded-lg focus:outline-none focus:border-brand-500 transition pr-10"
                                       placeholder="••••••••"
                                       minlength="8">
                                <button type="button" 
                                        @click="showNewPassword = !showNewPassword"
                                        class="absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600">
                                    <i :class="showNewPassword ? 'ph ph-eye-slash' : 'ph ph-eye'"></i>
                                </button>
                            </div>
                            
                            <!-- Password Strength Meter -->
                            <div class="mt-3">
                                <div class="flex justify-between mb-1">
                                    <span class="text-xs text-slate-600">Password strength:</span>
                                    <span class="text-xs font-medium" 
                                          :class="passwordStrengthClass"
                                          x-text="passwordStrengthText">
                                    </span>
                                </div>
                                <div class="h-2 bg-slate-200 rounded-full overflow-hidden">
                                    <div class="h-full transition-all duration-300" 
                                         :class="passwordStrengthBarClass"
                                         :style="`width: ${passwordStrength}%`">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Password Requirements -->
                            <div class="mt-3 space-y-1">
                                <p class="text-xs text-slate-600">Requirements:</p>
                                <div class="flex items-center gap-2">
                                    <i class="ph" 
                                       :class="newPassword.length >= 8 ? 'ph-check-circle text-green-500' : 'ph-circle text-slate-300'"></i>
                                    <span class="text-xs" :class="newPassword.length >= 8 ? 'text-slate-700' : 'text-slate-500'">
                                        At least 8 characters
                                    </span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <i class="ph" 
                                       :class="hasUppercase ? 'ph-check-circle text-green-500' : 'ph-circle text-slate-300'"></i>
                                    <span class="text-xs" :class="hasUppercase ? 'text-slate-700' : 'text-slate-500'">
                                        Contains uppercase letter
                                    </span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <i class="ph" 
                                       :class="hasLowercase ? 'ph-check-circle text-green-500' : 'ph-circle text-slate-300'"></i>
                                    <span class="text-xs" :class="hasLowercase ? 'text-slate-700' : 'text-slate-500'">
                                        Contains lowercase letter
                                    </span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <i class="ph" 
                                       :class="hasNumber ? 'ph-check-circle text-green-500' : 'ph-circle text-slate-300'"></i>
                                    <span class="text-xs" :class="hasNumber ? 'text-slate-700' : 'text-slate-500'">
                                        Contains number
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- Confirm Password -->
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">
                                Confirm New Password *
                            </label>
                            <div class="relative">
                                <input :type="showConfirmPassword ? 'text' : 'password'" 
                                       x-model="confirmPassword"
                                       required
                                       class="w-full form-input px-4 py-3 bg-white border border-slate-200 rounded-lg focus:outline-none focus:border-brand-500 transition pr-10"
                                       placeholder="••••••••">
                                <button type="button" 
                                        @click="showConfirmPassword = !showConfirmPassword"
                                        class="absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600">
                                    <i :class="showConfirmPassword ? 'ph ph-eye-slash' : 'ph ph-eye'"></i>
                                </button>
                            </div>
                            <p x-show="newPassword && confirmPassword && newPassword !== confirmPassword" 
                               class="text-xs text-red-500 mt-2">
                                Passwords do not match
                            </p>
                        </div>

                        <!-- Submit Button -->
                        <button type="submit"
                                :disabled="loading || newPassword !== confirmPassword || passwordStrength < 40"
                                :class="(newPassword !== confirmPassword || passwordStrength < 40 || loading) ? 'opacity-70 cursor-not-allowed' : 'hover:shadow-lg'"
                                class="w-full bg-gradient-to-r from-brand-600 to-emerald-500 text-white font-bold py-4 rounded-lg transition-all duration-300">
                            <span x-show="!loading">Reset Password & Sign In</span>
                            <span x-show="loading" class="flex items-center justify-center gap-2">
                                <i class="ph ph-circle-notch animate-spin"></i>
                                Resetting Password...
                            </span>
                        </button>
                    </form>
                </div>

                <!-- Support Section -->
                <div class="px-8 pb-8">
                    <div class="border-t border-slate-200 pt-8">
                        <div class="text-center">
                            <p class="text-slate-600 mb-4">
                                <i class="ph ph-info text-brand-600 mr-2"></i>
                                Need help? Contact our support team
                            </p>
                            <div class="flex flex-col sm:flex-row gap-3 justify-center">
                                <a href="mailto:support@plasiclms.com" 
                                   class="inline-flex items-center gap-2 text-slate-700 hover:text-brand-600 transition">
                                    <i class="ph ph-envelope-simple"></i>
                                    support@plasiclms.com
                                </a>
                                <span class="hidden sm:inline text-slate-400">•</span>
                                <a href="tel:+8801234567890" 
                                   class="inline-flex items-center gap-2 text-slate-700 hover:text-brand-600 transition">
                                    <i class="ph ph-phone"></i>
                                    +880 1234 567890
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div x-show="showSuccessModal" 
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0 scale-95"
         x-transition:enter-end="opacity-100 scale-100"
         x-transition:leave="transition ease-in duration-200"
         x-transition:leave-start="opacity-100 scale-100"
         x-transition:leave-end="opacity-0 scale-95"
         class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-2xl p-8 max-w-md w-full text-center">
            <div class="w-20 h-20 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-6">
                <i class="ph ph-check-circle text-4xl text-green-600"></i>
            </div>
            
            <h3 class="text-2xl font-black text-slate-900 mb-4">Password Reset Successful!</h3>
            <p class="text-slate-600 mb-8">
                Your password has been successfully reset. You can now sign in with your new password.
            </p>
            
            <div class="space-y-4">
                <a href="login.html" 
                   class="block w-full bg-gradient-to-r from-brand-600 to-emerald-500 text-white font-bold py-3 rounded-lg hover:shadow-lg transition">
                    Sign In Now
                </a>
                <a href="index.html" 
                   class="block w-full bg-white border-2 border-slate-200 text-slate-800 font-bold py-3 rounded-lg hover:border-brand-500 hover:text-brand-600 transition">
                    Back to Home
                </a>
            </div>
        </div>
    </div>

    <script>
        function forgotPasswordApp() {
            return {
                // Step Management
                step: 1,
                
                // Step 1: Email
                email: '',
                
                // Step 2: Verification Code
                codeDigits: ['', '', '', '', '', ''],
                timer: 600, // 10 minutes in seconds
                resendCooldown: 0,
                
                // Step 3: New Password
                newPassword: '',
                confirmPassword: '',
                showNewPassword: false,
                showConfirmPassword: false,
                passwordStrength: 0,
                hasUppercase: false,
                hasLowercase: false,
                hasNumber: false,
                
                // UI State
                loading: false,
                showSuccessModal: false,
                
                // Computed Properties
                get isCodeComplete() {
                    return this.codeDigits.every(digit => digit !== '');
                },
                
                get timerFormatted() {
                    const minutes = Math.floor(this.timer / 60);
                    const seconds = this.timer % 60;
                    return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                },
                
                get passwordStrengthText() {
                    if (this.passwordStrength < 25) return 'Weak';
                    if (this.passwordStrength < 50) return 'Fair';
                    if (this.passwordStrength < 75) return 'Good';
                    return 'Strong';
                },
                
                get passwordStrengthClass() {
                    if (this.passwordStrength < 25) return 'text-red-500';
                    if (this.passwordStrength < 50) return 'text-orange-500';
                    if (this.passwordStrength < 75) return 'text-yellow-500';
                    return 'text-green-500';
                },
                
                get passwordStrengthBarClass() {
                    if (this.passwordStrength < 25) return 'bg-red-500';
                    if (this.passwordStrength < 50) return 'bg-orange-500';
                    if (this.passwordStrength < 75) return 'bg-yellow-500';
                    return 'bg-green-500';
                },
                
                // Methods
                init() {
                    console.log('Forgot Password page initialized');
                },
                
                async sendResetCode() {
                    if (!this.email) {
                        alert('Please enter your email address');
                        return;
                    }
                    
                    this.loading = true;
                    
                    try {
                        // Simulate API call
                        await new Promise(resolve => setTimeout(resolve, 1500));
                        
                        console.log('Reset code sent to:', this.email);
                        
                        // Move to step 2
                        this.step = 2;
                        
                        // Start timer
                        this.startTimer();
                        
                        // Start resend cooldown
                        this.startResendCooldown();
                        
                    } catch (error) {
                        console.error('Error sending code:', error);
                        alert('Failed to send verification code. Please try again.');
                    } finally {
                        this.loading = false;
                    }
                },
                
                startTimer() {
                    const timerInterval = setInterval(() => {
                        if (this.timer > 0) {
                            this.timer--;
                        } else {
                            clearInterval(timerInterval);
                            // Code expired
                            if (this.step === 2) {
                                alert('Verification code has expired. Please request a new one.');
                                this.step = 1;
                                this.resetCode();
                            }
                        }
                    }, 1000);
                },
                
                startResendCooldown() {
                    this.resendCooldown = 30; // 30 seconds cooldown
                    
                    const cooldownInterval = setInterval(() => {
                        if (this.resendCooldown > 0) {
                            this.resendCooldown--;
                        } else {
                            clearInterval(cooldownInterval);
                        }
                    }, 1000);
                },
                
                handleCodeInput(index, event) {
                    const value = event.target.value;
                    
                    if (value && /[0-9]/.test(value)) {
                        this.codeDigits[index] = value;
                        
                        // Auto-focus next input
                        if (index < 5) {
                            const nextInput = event.target.nextElementSibling;
                            if (nextInput) nextInput.focus();
                        }
                    } else {
                        this.codeDigits[index] = '';
                    }
                },
                
                handleCodeDelete(index, event) {
                    if (event.key === 'Backspace' && !this.codeDigits[index]) {
                        // Move to previous input
                        if (index > 0) {
                            const prevInput = event.target.previousElementSibling;
                            if (prevInput) {
                                prevInput.focus();
                                this.codeDigits[index - 1] = '';
                            }
                        }
                    }
                },
                
                async verifyCode() {
                    if (!this.isCodeComplete) {
                        alert('Please enter the complete 6-digit code');
                        return;
                    }
                    
                    const code = this.codeDigits.join('');
                    
                    this.loading = true;
                    
                    try {
                        // Simulate API verification
                        await new Promise(resolve => setTimeout(resolve, 1000));
                        
                        console.log('Verifying code:', code);
                        
                        // Check if code is valid (simulated)
                        if (code === '123456') { // Test code for demo
                            alert('Invalid verification code. Please try again.');
                            this.resetCode();
                            return;
                        }
                        
                        // Move to step 3
                        this.step = 3;
                        
                    } catch (error) {
                        console.error('Error verifying code:', error);
                        alert('Failed to verify code. Please try again.');
                    } finally {
                        this.loading = false;
                    }
                },
                
                async resendCode() {
                    if (this.resendCooldown > 0) return;
                    
                    this.loading = true;
                    
                    try {
                        // Simulate API call
                        await new Promise(resolve => setTimeout(resolve, 1000));
                        
                        console.log('Resending code to:', this.email);
                        
                        // Reset timer and code
                        this.timer = 600;
                        this.resetCode();
                        this.startTimer();
                        this.startResendCooldown();
                        
                        alert('New verification code sent to your email.');
                        
                    } catch (error) {
                        console.error('Error resending code:', error);
                        alert('Failed to resend code. Please try again.');
                    } finally {
                        this.loading = false;
                    }
                },
                
                checkPasswordStrength() {
                    const password = this.newPassword;
                    
                    // Check requirements
                    this.hasUppercase = /[A-Z]/.test(password);
                    this.hasLowercase = /[a-z]/.test(password);
                    this.hasNumber = /[0-9]/.test(password);
                    
                    // Calculate strength (0-100)
                    let strength = 0;
                    
                    // Length check
                    if (password.length >= 8) strength += 25;
                    if (password.length >= 12) strength += 10;
                    
                    // Complexity checks
                    if (this.hasUppercase) strength += 20;
                    if (this.hasLowercase) strength += 20;
                    if (this.hasNumber) strength += 20;
                    
                    // Special character check
                    if (/[!@#$%^&*(),.?":{}|<>]/.test(password)) strength += 25;
                    
                    this.passwordStrength = Math.min(strength, 100);
                },
                
                async resetPassword() {
                    if (this.newPassword !== this.confirmPassword) {
                        alert('Passwords do not match');
                        return;
                    }
                    
                    if (this.passwordStrength < 40) {
                        alert('Please choose a stronger password');
                        return;
                    }
                    
                    this.loading = true;
                    
                    try {
                        // Simulate API call
                        await new Promise(resolve => setTimeout(resolve, 1500));
                        
                        console.log('Password reset for:', this.email);
                        
                        // Show success modal
                        this.showSuccessModal = true;
                        
                    } catch (error) {
                        console.error('Error resetting password:', error);
                        alert('Failed to reset password. Please try again.');
                    } finally {
                        this.loading = false;
                    }
                },
                
                resetCode() {
                    this.codeDigits = ['', '', '', '', '', ''];
                },
                
                usePhoneRecovery() {
                    alert('Phone recovery would be implemented here');
                },
                
                useSecurityQuestions() {
                    alert('Security questions recovery would be implemented here');
                }
            }
        }
    </script>
</body>
</html>